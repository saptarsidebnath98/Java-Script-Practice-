<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOM practice</title>
    <style>
      .container > #registrationForm{
        display: flex;
        flex-direction: column;
        gap: 20px;
      };
    </style>
</head>
<body>
    <div class="container mt-2">
        <h1>Registration Form</h1>
        <form id="registrationForm">
          <div class="form-group row">
            <div class="col">
              <input id="username" type="text" class="form-control">
            </div>
          </div>
          <div class="form-group row">
            <div class="col">
              <input id="password" type="password" class="form-control">
            </div>
          </div>
          <div class="form-group row">
            <div class="col">
              <input id="confirmPassword" type="password" class="form-control">
            </div>
          </div>
          <div class="row">
            <div class="col">
                <button class="btn btn-primary btn-block">
                  Register
              </button>
            </div>
          </div>
        </form>
      </div>

      <script>
          /* JavaScript DOM Exercises 02 Tutorial: https://youtu.be/qQy5K-pE8Fo */
/*
  Exercises 01
  ------------
  Add a label to each of the input fields: username, password, confirm password
*/
document.querySelector('#username').insertAdjacentHTML("beforeBegin",`<label for="username">Username:</label>`);
document.querySelector('#password').insertAdjacentHTML("beforeBegin",`<label for="password">Password</label>`);
document.querySelector('#confirmPassword').insertAdjacentHTML("beforeBegin",`<label for="confirmPassword">Confirm Password:</label>`);
    
/*
  Exercise 02
  -----------
  Add a required validation to each input that shows an error message next to the entry if it does not have any text entered.
*/
const ckeckInput = (event) => {
  const errorElement = Array.from(event.target.parentNode.querySelectorAll('span'));
  if(event.target.value === '' && !errorElement.length){
    event.target.insertAdjacentHTML('afterEnd', `<span style="color: red; font-size: 0.7rem">Required</span>`)
  }
  if(errorElement && event.target.value !== ''){
    errorElement.forEach(elem => elem.remove());
  }
}
document.querySelector('#username').addEventListener('blur', ckeckInput);
document.querySelector('#password').addEventListener('blur', ckeckInput);
document.querySelector('#confirmPassword').addEventListener('blur',ckeckInput);


/*
  Exercise 03
  -----------
  Add a further validation to check if the user input in the password and confirm password inputs match.  Show an error message if they do not.
*/
const passwordInput = document.querySelector('#password');
const confirmPasswordInput = document.querySelector("#confirmPassword");

confirmPasswordInput.addEventListener('blur', (event) => {
  if(event.target.value !== password.value){
    event.target.insertAdjacentHTML('afterEnd', `<span style="color: red; font-size: 0.7rem">password should match</span>`)
  }
})
/*
  Exercise 04
  -----------
Ensure the ‘Register’ button is disabled until the user has entered valid data into all the input fields.  Once they have, the registration button should then be enabled.
*/


/*
  Exercise 05
  -----------
When the user clicks the ‘Register’ button, a message should be displayed informing them of a successful user registration.
*/



/*
  Exercise 02
  -----------
  Add a required validation to each input that shows an error message next to the entry if it does not have any text entered.
*/



      </script>
</body>
</html>